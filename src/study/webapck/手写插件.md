## 插件

插件没有 loader 那样的独立运行环境
只能在 webpack 里面运行

### 插件的基本结构

```javascript
// 插件名称
class MyPlugin {
  // 插件上面的 apply 方法
  apply(compiler) {
    // 插件的 hooks
    compiler.hooks.done.tap("My Plugin", (stats) => {
      // 插件的具体处理逻辑
      console.log("hello world");
    });
  }
}
module.exports = MyPlugin;
```

```javascript
plugins: [new MyPlugin()];
```

### 搭建插件的运行环境

```javascript
const path = require("path");
const DemoPlugin = require("./plugins/demo-plugin.js");

const PATHS = {
  lib: path.join(__dirname, "app", "shake.js"),
  build: path.join(__dirname, "build"),
};

module.exports = {
  entry: {
    lib: PATHS.lib,
  },
  output: {
    path: PATHS.build,
    filename: "[name].js",
  },
  plugins: [new DemoPlugin()],
};
```

my-plugins.js

```javascript
module.exports = class MyPlugin {
  constructor(options) {
    this.options = options;
  }

  apply(compiler) {
    console.log("myPlugin");
    console.log("myPlugin options: ", this.options);
  }
};
```
